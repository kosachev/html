<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Меню + Слайдер</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Arial, sans-serif;
        background: #fcdce5;
      }

      header {
        position: sticky;
        top: 0;
        background-color: #333;
        color: white;
        padding: 1rem;
        z-index: 1000;
      }

      .menu-button {
        background: #555;
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        cursor: pointer;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: -250px;
        width: 250px;
        height: 100%;
        background: #222;
        color: white;
        padding: 1rem;
        transition: left 0.3s ease;
        z-index: 1001;
      }

      .sidebar.open {
        left: 0;
      }

      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        z-index: 1000;
      }

      .overlay.show {
        display: block;
      }

      .content {
        padding: 2rem;
      }

      /* Слайдер */
      .slider {
        position: relative;
        overflow: hidden;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        border-radius: 12px;
      }

      .slider-track {
        display: flex;
        transition: transform 0.4s ease;
        touch-action: pan-y;
      }

      .slide {
        min-width: 100%;
        user-select: none;
      }

      .slide img {
        width: 100%;
        display: block;
        border-radius: 12px;
      }

      .dots {
        text-align: center;
        margin-top: 10px;
      }

      .dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        background: #999;
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
      }

      .dot.active {
        background: #333;
      }
    </style>
  </head>
  <body>
    <div class="sidebar" id="sidebar">
      <p>Левое меню</p>
      <ul>
        <li>Пункт 1</li>
        <li>Пункт 2</li>
        <li>Пункт 3</li>
      </ul>
    </div>

    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

    <header>
      <button class="menu-button" onclick="toggleSidebar()">☰ Меню</button>
      <span style="margin-left: 1rem">Хедер</span>
    </header>

    <div class="content">
      <h2 style="text-align: center; margin-bottom: 1rem">Слайдер</h2>

      <div class="slider" id="slider">
        <div class="slider-track" id="sliderTrack">
          <div class="slide"><img src="slide1.jpg" alt="Слайд 1" /></div>
          <div class="slide"><img src="slide2.jpg" alt="Слайд 2" /></div>
          <div class="slide"><img src="slide3.jpg" alt="Слайд 3" /></div>
        </div>
      </div>

      <div class="dots" id="dots">
        <span class="dot active" onclick="goToSlide(0)"></span>
        <span class="dot" onclick="goToSlide(1)"></span>
        <span class="dot" onclick="goToSlide(2)"></span>
      </div>
    </div>

    <script>
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");

      function openSidebar() {
        sidebar.classList.add("open");
        overlay.classList.add("show");
      }

      function closeSidebar() {
        sidebar.classList.remove("open");
        overlay.classList.remove("show");
      }

      function toggleSidebar() {
        const isOpen = sidebar.classList.contains("open");
        isOpen ? closeSidebar() : openSidebar();
      }

      document.addEventListener("keydown", (e) => {
        if (e.key.toLowerCase() === "m") toggleSidebar();
        if (e.key === "Escape") closeSidebar();
      });

      // Свайп: только закрытие меню
      let touchStartX = 0;
      document.addEventListener("touchstart", (e) => {
        touchStartX = e.changedTouches[0].screenX;
      });

      document.addEventListener("touchend", (e) => {
        const endX = e.changedTouches[0].screenX;
        const deltaX = endX - touchStartX;

        // Только закрытие меню по свайпу влево
        if (deltaX < -70) closeSidebar();
      });

      // Слайдер
      const sliderTrack = document.getElementById("sliderTrack");
      const dots = document.querySelectorAll(".dot");
      let currentIndex = 0;

      function goToSlide(index) {
        sliderTrack.style.transform = `translateX(-${index * 100}%)`;
        dots[currentIndex].classList.remove("active");
        dots[index].classList.add("active");
        currentIndex = index;
      }

      // Свайпы только внутри слайдера
      let slideStartX = 0;
      sliderTrack.addEventListener("touchstart", (e) => {
        slideStartX = e.touches[0].clientX;
      });

      sliderTrack.addEventListener("touchend", (e) => {
        let slideEndX = e.changedTouches[0].clientX;
        let diff = slideStartX - slideEndX;

        if (diff > 50 && currentIndex < 2) goToSlide(currentIndex + 1);
        if (diff < -50 && currentIndex > 0) goToSlide(currentIndex - 1);
      });
    </script>
  </body>
</html>
